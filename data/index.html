<!DOCTYPE HTML><html>
  <head>
    <title>ESP Web Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">

    <script>
      function toggleCheckbox(element) {
        var xhr = new XMLHttpRequest();
        if(element.checked){ xhr.open("GET", "/update?switch=1", true); }
        else { xhr.open("GET", "/update?switch=0", true); }
        xhr.send();
      }
      
      //update slider element on html page
      function updateSliderPWM(element) {
        var sliderValue = document.getElementById("pwmSlider").value;
         //sliderValue = map(sliverValue, 0, 1023, 0, 100)
        document.getElementById("textSliderValue").innerHTML = sliderValue;
        console.log(sliderValue);
        
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/update?slider="+sliderValue, true);
        xhr.send();
      }
      
        //update sliderelement on html page
        function updateSliderPWM27(element) {
        var sliderValue = document.getElementById("pwmSlider27").value;
        document.getElementById("textSliderValue27").innerHTML = sliderValue;
        console.log(sliderValue);
        
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/update?slider27="+sliderValue, true);
        xhr.send();
      }
      
        //update slider for GPIO 13 element on html page
        function updateSliderPWM13(element) {
        var sliderValue = document.getElementById("pwmSlider13").value;
        document.getElementById("textSliderValue13").innerHTML = sliderValue;
        console.log(sliderValue);
        
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/update?slider13="+sliderValue, true);
        xhr.send();
      }
      </script>


  </head>
  <body>
    <h2>Cat Toy 3</h2>
    <p>Toggle</p>
    <input id= "outputState" class="switch" onchange="toggleCheckbox(this)" type="checkbox">
    <h1>Pan</h1>
    <p><span id="textSliderValue">%SLIDERVALUE%</span></p>
    <p><input type="range" oninput="updateSliderPWM(this)" id="pwmSlider" min="0" max="1023" value="%SLIDERVALUE%" step="1" class="slider"></p>
    
    <h1>Rotate Head</h1>
    <p><span id="textSliderValue27">%SLIDERVALUE%</span></p>
    <p><input type="range" oninput="updateSliderPWM27(this)" id="pwmSlider27" min="0" max="1023" value="%SLIDERVALUE%" step="1" class="slider"></p>
    
    <h1>Tilt</h1>
    <p><span id="textSliderValue13">%SLIDERVALUE%</span></p>
    <p><input type="range" oninput="updateSliderPWM13(this)" id="pwmSlider13" min="0" max="1023" value="%SLIDERVALUE%" step="1" class="slider"></p>
    
    
   
  </body>
</html>